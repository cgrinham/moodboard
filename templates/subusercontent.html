$def with (imagelist, imagerange, numberofimages, prevpage, nextpage, folderlist, user, directory, session)

$var title: Moodboard $imagerange
$var nextpage: $nextpage
$var prevpage: $prevpage
$var numberofimages: $numberofimages
$var folderlist = folderlist[0]
$var user = user
$var session = session

$if session.username == user:
    $for image in imagelist:
        <div class="userimage-container" data-absimage="static/users/$user/images/$directory/$image">
            <div class="userimage-controls">
                <a href="#"><img class="delete" src="/static/img/delete2.png" alt="Delete Image" title="Delete Image"></a>
                <ul class="mover">
                    <li>
                        <img src="/static/img/move.png" alt="move">
                        <div>
                            <select class="move" name="move">
                                <option value="">Move to...</option>
                                <option value="root">$user</option>
                                $for folder in folderlist[1]:
                                    $if folder != directory:
                                        <option value="$folder">$folder</option>
                            </select>
                        </div>
                    </li>
                </ul>
                <a href="#"><img class="rotate_cw" src="/static/img/rotate_cw.png" alt=""></a>
                <a href="#"><img class="rotate_ccw" src="/static/img/rotate_ccw.png" alt=""></a>
            </div>
            <a class="userimage-link" href="../static/users/$user/images/$directory/$image">
                <img class="mb-image" src="../static/users/$user/images/$directory/thumbs/$image" alt="">
            </a>
        </div>
$else:
    $for image in imagelist:
        <a href="../static/users/$user/images/$directory/$image"><img class="mb-image" src="../static/users/$user/images/$directory/thumbs/$image" alt=""></a>